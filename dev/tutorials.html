

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorials &mdash; WecOptTool 3.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=a0fb6060" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=dd1205ac"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial 1 - WaveBot" href="_examples/tutorial_1_WaveBot.html" />
    <link rel="prev" title="Implementation" href="implementation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            WecOptTool
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory &amp; Practice</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementation.html">Implementation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="_examples/tutorial_1_WaveBot.html">Tutorial 1 - WaveBot</a></li>
<li class="toctree-l2"><a class="reference internal" href="_examples/tutorial_2_AquaHarmonics.html">Tutorial 2 - AquaHarmonics</a></li>
<li class="toctree-l2"><a class="reference internal" href="_examples/tutorial_3_LUPA.html">Tutorial 3 - LUPA</a></li>
<li class="toctree-l2"><a class="reference internal" href="_examples/tutorial_4_Pioneer.html">Tutorial 4 - Pioneer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simulating-wec-dynamics-without-optimization">Simulating WEC Dynamics without optimization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_docs/wecopttool.html">API Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">WecOptTool</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tutorials</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tutorials">
<h1>Tutorials<a class="headerlink" href="#tutorials" title="Link to this heading"></a></h1>
<p>This section presents tutorials illustrating the application of WecOptTool.
The tutorials are written as Jupyter Notebooks and are available in the <a class="reference external" href="https://github.com/sandialabs/WecOptTool/tree/main/examples">GitHub repository</a>.</p>
<p>The first tutorial uses the <a class="reference external" href="https://doi.org/10.3390/en10040472">WaveBot</a> WEC, which is a single-body WEC developed at Sandia.
The tutorial has three sequential parts of increased complexity.
The first and second parts solve only the inner optimization loop for optimal mechanical and electrical power, respectively.
The third part builds on the second to solve a design optimization problem, using both the inner and outer optimization loops, and is more reflective of the optimization problems WecOptTool is designed to solve.</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="_examples/tutorial_1_WaveBot.html"><span class="doc">Tutorial 1 - WaveBot</span></a>: Three part example of using the inner and outer optimization loops for a simple control co-design study.</p></li>
</ul>
</div></blockquote>
<p>The second and third tutorials use the <a class="reference external" href="https://aquaharmonics.com/technology/">AquaHarmonics</a> and <a class="reference external" href="https://pmec-osu.github.io/LUPA/">LUPA</a> WECs, respectively, and provide more robust optimization examples illustrating more complex cases of the WEC body, power take-off, applied forces, and constraints.
These tutorials each have two parts, which are similar in structure to the second and third parts of Tutorial 1.</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="_examples/tutorial_2_AquaHarmonics.html"><span class="doc">Tutorial 2 - AquaHarmonics</span></a>: Two part example with a realistic power take-off system and co-design study. You can find an extended version</p></li>
<li><p><a class="reference internal" href="_examples/tutorial_3_LUPA.html"><span class="doc">Tutorial 3 - LUPA</span></a>: Two part example with multiple bodies, multiple degrees of freedom, irregular waves, a mooring system, and realistic constraints.</p></li>
</ul>
</div></blockquote>
<p>The fourth tutorial uses the <cite>Pioneer WEC</cite> model, which includes a unique pitch resonator PTO system. This tutorial illustrates how to use WecOptTool to implement and optimize control strategies for less common PTO archetypes.</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="_examples/tutorial_4_Pioneer.html"><span class="doc">Tutorial 4 - Pioneer</span></a>: Example with custom PTO physics and modeling both hydrodynamic and non-hydrodynamic degrees of freedom.</p></li>
</ul>
</div></blockquote>
<div class="toctree-wrapper compound">
</div>
<section id="simulating-wec-dynamics-without-optimization">
<h2>Simulating WEC Dynamics without optimization<a class="headerlink" href="#simulating-wec-dynamics-without-optimization" title="Link to this heading"></a></h2>
<p>There may be situations where it is useful to see the dynamics of the WEC subject to certain constraints without performing optimization on the device.
This can be done by setting <code class="docutils literal notranslate"><span class="pre">nstate_opt=0</span></code> and using an objective function that does not depend on <code class="docutils literal notranslate"><span class="pre">x_wec</span></code>.</p>
<p>The easiest way to do this is to set an objective function that always equals zero.
Constraints and additional forces can also be added, but they must be independent of <code class="docutils literal notranslate"><span class="pre">x_opt</span></code> since there are no constrol states.
The additional forces should also be defined at all nonzero states (i.e. returns length <code class="docutils literal notranslate"><span class="pre">nfreq</span> <span class="pre">*</span> <span class="pre">2</span></code>).</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># define additional force</span>
<span class="c1"># (must be independent of x_opt and of length nfreq * 2)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">forcing_func</span><span class="p">(</span><span class="n">wec</span><span class="p">,</span> <span class="n">x_wec</span><span class="p">,</span> <span class="n">x_opt</span><span class="p">,</span> <span class="n">waves</span><span class="p">):</span>
    <span class="n">frc</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">nfreq</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="n">frc</span>
 <span class="n">f_add</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Additional force&#39;</span><span class="p">:</span> <span class="n">forcing_func</span><span class="p">}</span>

<span class="c1"># define constraint</span>
<span class="c1"># (must be independent of x_opt)</span>
<span class="n">f_max</span> <span class="o">=</span> <span class="mf">750.</span>
<span class="k">def</span><span class="w"> </span><span class="nf">force_constraint</span><span class="p">(</span><span class="n">wec</span><span class="p">,</span> <span class="n">x_wec</span><span class="p">,</span> <span class="n">x_opt</span><span class="p">,</span> <span class="n">waves</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">f_max</span>
<span class="n">ineq_cons</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;ineq&#39;</span><span class="p">,</span>
             <span class="s1">&#39;fun&#39;</span><span class="p">:</span> <span class="n">force_constraint</span><span class="p">,</span>
             <span class="p">}</span>
<span class="n">constraints</span> <span class="o">=</span> <span class="p">[</span><span class="n">ineq_cons</span><span class="p">]</span>

<span class="c1"># define WEC object</span>
<span class="n">wec</span> <span class="o">=</span> <span class="n">wot</span><span class="o">.</span><span class="n">WEC</span><span class="o">.</span><span class="n">from_bem</span><span class="p">(</span>
     <span class="n">bem_data</span><span class="p">,</span> <span class="c1"># define beforehand as you normally would</span>
     <span class="n">constraints</span><span class="o">=</span><span class="n">constraints</span><span class="p">,</span>
     <span class="n">friction</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
     <span class="n">f_add</span><span class="o">=</span><span class="n">f_add</span><span class="p">)</span>

<span class="c1"># create dummy objective function</span>
<span class="n">obj_fun</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">wec</span><span class="p">,</span> <span class="n">x_wec</span><span class="p">,</span> <span class="n">x_opt</span><span class="p">,</span> <span class="n">waves</span> <span class="p">:</span> <span class="mi">0</span>
<span class="n">nstate_opt</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># solve problem (should solve on first iteration)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">wec</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span>
    <span class="n">waves</span><span class="o">=</span><span class="n">waves</span><span class="p">,</span> <span class="c1"># define beforehand as you normally would</span>
    <span class="n">obj_fun</span><span class="o">=</span><span class="n">obj_fun</span><span class="p">,</span>
    <span class="n">nstate_opt</span><span class="o">=</span><span class="n">nstate_opt</span>
    <span class="p">)</span>

<span class="c1"># post process</span>
<span class="n">nsubsteps</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">wec_fdom</span><span class="p">,</span> <span class="n">wec_tdom</span> <span class="o">=</span> <span class="n">wec</span><span class="o">.</span><span class="n">post_process</span><span class="p">(</span><span class="n">wec</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">waves</span><span class="p">,</span> <span class="n">nsubsteps</span><span class="o">=</span><span class="n">nsubsteps</span><span class="p">)</span>
<span class="n">wec_tdom</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="implementation.html" class="btn btn-neutral float-left" title="Implementation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="_examples/tutorial_1_WaveBot.html" class="btn btn-neutral float-right" title="Tutorial 1 - WaveBot" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020 National Technology &amp; Engineering Solutions of Sandia, LLC (NTESS). Under the terms of Contract DE-NA0003525 with NTESS, the U.S. Government retains certain rights in this software.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    Version: dev
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions"><dl>
      <dt>Branches</dt><dd><a href="../tutorials.html">latest</a></dd><dd><a href="../dev/tutorials.html">dev</a></dd></dl></div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>